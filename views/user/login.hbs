<link rel="stylesheet" href="/styles/userLogin.css">
<div class="login">
    <h1>Login</h1>
    <form id="log" method="post" action="/user/login">
        <div type="text" id="checkMsg3" data-message="{{message}}"></div>
        <input type="text" name="email" id="email" placeholder="Email" />
        <input type="password" name="password" id="password" placeholder="Password"  />
        <button type="submit" class="btn btn-primary btn-block btn-large">Login</button>
        <div class="link">
            <div><a href="">Forgot password</a></div>
            <div><a href="">Do you have an Account</a></div>
        </div>
    </form>
</div>


<script>
    const msg = document.getElementById("checkMsg3").dataset.message;
    if (msg && msg != "null" && msg === "user created successfully") {
        Swal.fire({
            icon: "success",
            title: "Registration Successful",
            text: msg,
            timer: 2000,
            showConfirmButton: false
        });
    } else if (msg && msg != "null" && msg === "password incorrect") {
        Swal.fire({
            icon: "success",
            title: "Went wrong",
            text: msg,
            timer: 2000,
            showConfirmButton: false
        });
    } else if (msg && msg != "null" && msg === "login successfull") {
        Swal.fire({
            icon: "success",
            title: "login successfull",
            text: msg,
            timer: 2000,
            showConfirmButton: false
        });
    }else if( msg && msg != "null" && msg=== "user not exist"){
              Swal.fire({
        icon: "error",
        title: "USER NOT EXIST",
        text: "Oops!"
      });
    }
</script>

<script>

    document.getElementById("log").addEventListener("submit", function formValidation(e) {

        e.preventDefault();

        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value.trim();

        if (email === "" || password === "") {
            Swal.fire({
                icon: "error",
                title: "Oops...",
                text: "All fields are required!"
            });
            return false;
        }
        e.target.submit();
    })

</script>